package edu.ace.infinite.utils;

import okhttp3.Cookie;
import okhttp3.OkHttpClient;
import okhttp3.Request;
import okhttp3.Response;
import org.json.JSONArray;
import org.json.JSONObject;

import java.util.Objects;
import java.util.Random;
import java.util.concurrent.TimeUnit;

public class HttpUtils {
    public static OkHttpClient client = new OkHttpClient()
            .newBuilder().connectTimeout(5000, TimeUnit.MILLISECONDS)
            .readTimeout(6000, TimeUnit.MILLISECONDS).build();

    //默认Cookie
    public static final String cookie = "ttwid=1%7Cy7-wgq699S5dfD3cwmlihWBJ_k0Itkr-EhSSy1ZQ5wM%7C1721892345%7C234d8ba0bcc10dea1d6ab0ab7a9bd962dba04ed5175a8984b6c9a9a7e806d891; UIFID_TEMP=3c3e9d4a635845249e00419877a3730e2149197a63ddb1d8525033ea2b3354c2e13a8efc0737ffdb2d89b7f1396ae6c753d3a0e928e7576fb849b056e7a885fcb63e9a3de8ac0b28abd5426aa3f636c7168f4f248c11fae9869f7c8b6082cae453e94e92e37e23457464bc55a8fe8c05; fpk1=U2FsdGVkX19bRxdI0zJSdj879yBkQRM79FHi8KsM4e84X+//P6tK2h00CuPmjvonC846JvHB/+fa8THZFHCPfg==; fpk2=f1f6b29a6cc1f79a0fea05b885aa33d0; SEARCH_RESULT_LIST_TYPE=%22single%22; xgplayer_user_id=573747585579; UIFID=3c3e9d4a635845249e00419877a3730e2149197a63ddb1d8525033ea2b3354c27408bce5219e2fa374624a4a7620947f974234b76297772ac00c7416492af1039e558600e8a3593470cfe202bd0fefe8ac898fd5b454621e5173c2d27d846be44ffa2b919fa8f5e5547f703b6473c9706347ff45f748057592eb17da050ecd7152db10c65a1594346daa429705768d766d348c8f0774538707d499a9c0810d126b829f2987a6bd53c65dd992224cbdbf7aebd8f07738e7560534ebcc40e4a9b5; hevc_supported=true; s_v_web_id=verify_m3cssxot_nGMCjVUb_AS8M_4Uk4_95fx_ilcrcqL9qPOL; passport_csrf_token=05dde154ea4260d0166c150067be65c3; passport_csrf_token_default=05dde154ea4260d0166c150067be65c3; bd_ticket_guard_client_web_domain=2; douyin.com; is_dash_user=1; device_web_cpu_core=16; device_web_memory_size=8; architecture=amd64; dy_swidth=1536; dy_sheight=864; csrf_session_id=7f156f9edc3de0f10fb757bcbb1e6e37; strategyABtestKey=%221733124841.361%22; FORCE_LOGIN=%7B%22videoConsumedRemainSeconds%22%3A180%7D; volume_info=%7B%22isUserMute%22%3Afalse%2C%22isMute%22%3Atrue%2C%22volume%22%3A0.5%7D; download_guide=%223%2F20241202%2F0%22; __ac_signature=_02B4Z6wo00f01yPvWWQAAIDC.LSqKim4skMjz13AAK.Bef; gulu_source_res=eyJwX2luIjoiNGEyZmE1ZTg5YTg1M2ViNDJiOTRmMzNjODI3MThlYzAyMDdmNDc5ZjdhYTgxNmE5ZjlmZmNjNmI3OGFhZWZmNiJ9; sdk_source_info=7e276470716a68645a606960273f276364697660272927676c715a6d6069756077273f276364697660272927666d776a68605a607d71606b766c6a6b5a7666776c7571273f275e58272927666a6b766a69605a696c6061273f27636469766027292762696a6764695a7364776c6467696076273f275e5827292771273f273d343436373d3c373436363234272927676c715a75776a716a666a69273f2763646976602778; bit_env=tfkR43oc1TAbZyNv1ysXe1mIZJJTAPiuBvFM3OcXRxafq-_8LeYuvKJi-Ls-S10sOCW5gbNnWa-hRCnizl5KfWNWuGUTI3pnt7nbyBdoZUeKNpXqpaIfGowhLvO7vintwvBscYd-tPkya4bkPgbZ4m5RPRnLH4d9ttJsbhHFeBuT8lJFTgGKPJUgjfDSrcl8txaFQ7l80Ef1ICSOtkoBiJF4PhEIXu4sS9zIHfcLXsbr34t2ikmEOlSJiuZyn_ZPimfFGORNXHLULx8pkBJsx2dgsQRQ42fsCb3CNtita8xJDnlI9eKq1AB_Lmnb2OHoYsYwWMiNlx7qyFIsjC2YWq9S8_4gXzTBvTRZdIQILf30bdrljnl3jWM6dZTsbW-JbwM0FoHtdmUB0dGI05RHdBA9jh7Ehsn1EzOVmmYNBphHKsjL7oloIVhy-8yC-0ToVhthOtNWPbvj7JNpQPGDKL4myam-ZwSKu_XJvmzn7LiRs5HucuD2Y8aeASy3BH6G; passport_auth_mix_state=l77prm6nsshqvnosgn6phiguctwozx2h; passport_mfa_token=CjUpVNetvpB8Zr1jZ2tbtInUu38uUWEvjROrAsVcmkMpmk9I5M8B0mNz0oEvbuGjuQF1CQtF4BpKCjwtGudUs%2BSswQPE11KonfIvva%2BR7rYcYQCWQbosDQsJqBhxE752x56MMscPL1VmmkDXmaqHZlDWDiOVutQQr4PjDRj2sdFsIAIiAQOcqBrs; d_ticket=ddee2028b8cf6666247e3c9272741fbdf9b5c; passport_assist_user=Cj2R92G3UV6xb-jmf4xxvJn9rGYhyqNoeb5ZSpOx_Q2bucZ4dHqM4hzWGUF-w-LjdYFC6pf-RxnE4DMztLwyGkoKPOe34cqvpZUziLeaq-Xv5U9l4jR_cjtOyCIoRKlgiVWeVaaM8cxcxAt5-eVtr1Oft8zr4nnFdghJhgLFZhDlguMNGImv1lQgASIBA9NkpvA%3D; n_mh=uMdSiFmP8i2dWj6705vGWkn9--naSG-Lx121BtF2X_U; sso_uid_tt=5783a2886eed7c61f2db7d24b6c405de; sso_uid_tt_ss=5783a2886eed7c61f2db7d24b6c405de; toutiao_sso_user=e3c58d87b0bad2ebe435a00058dfdd0c; toutiao_sso_user_ss=e3c58d87b0bad2ebe435a00058dfdd0c; sid_ucp_sso_v1=1.0.0-KGMzNDY2ODNkYzM3N2UyMTk5ZmU2ZjE2MTcyNmJlNTdjNGFhOGY3YWUKHwiqiJL99wIQl-21ugYY7zEgDDCNotLZBTgGQPQHSAYaAmxxIiBlM2M1OGQ4N2IwYmFkMmViZTQzNWEwMDA1OGRmZGQwYw; ssid_ucp_sso_v1=1.0.0-KGMzNDY2ODNkYzM3N2UyMTk5ZmU2ZjE2MTcyNmJlNTdjNGFhOGY3YWUKHwiqiJL99wIQl-21ugYY7zEgDDCNotLZBTgGQPQHSAYaAmxxIiBlM2M1OGQ4N2IwYmFkMmViZTQzNWEwMDA1OGRmZGQwYw; login_time=1733129879643; passport_auth_status=52cb51f862f9f9b8ebaf0776aa492051%2C; passport_auth_status_ss=52cb51f862f9f9b8ebaf0776aa492051%2C; uid_tt=a68f5506ce7d5e57aebf0fa0e442282f; uid_tt_ss=a68f5506ce7d5e57aebf0fa0e442282f; sid_tt=b1a080f6bf22a258d2e4b56893e0be43; sessionid=b1a080f6bf22a258d2e4b56893e0be43; sessionid_ss=b1a080f6bf22a258d2e4b56893e0be43; is_staff_user=false; __ac_nonce=0674d769900d5331733a5; SelfTabRedDotControl=%5B%5D; FOLLOW_LIVE_POINT_INFO=%22MS4wLjABAAAASmPmcSDRbNaw1E1RDCQkwWeYoTNcpq02bL4GM1_9u_Y%2F1733155200000%2F0%2F1733129894052%2F0%22; _bd_ticket_crypt_doamin=2; _bd_ticket_crypt_cookie=74e5bf5e06aeb90df2e2297b72556239; __security_server_data_status=1; publish_badge_show_info=%220%2C0%2C0%2C1733129895728%22; xg_device_score=7.90435294117647; sid_guard=b1a080f6bf22a258d2e4b56893e0be43%7C1733129897%7C5183985%7CFri%2C+31-Jan-2025+08%3A58%3A02+GMT; sid_ucp_v1=1.0.0-KDZmZmY2Yjc3OTE2NzYyMDBhNjkzYjgwOGIwMDg0ZTIwNjA1YTJmNzMKGQiqiJL99wIQqe21ugYY7zEgDDgGQPQHSAQaAmxxIiBiMWEwODBmNmJmMjJhMjU4ZDJlNGI1Njg5M2UwYmU0Mw; ssid_ucp_v1=1.0.0-KDZmZmY2Yjc3OTE2NzYyMDBhNjkzYjgwOGIwMDg0ZTIwNjA1YTJmNzMKGQiqiJL99wIQqe21ugYY7zEgDDgGQPQHSAQaAmxxIiBiMWEwODBmNmJmMjJhMjU4ZDJlNGI1Njg5M2UwYmU0Mw; biz_trace_id=2826297d; store-region=cn-sc; store-region-src=uid; IsDouyinActive=true; stream_recommend_feed_params=%22%7B%5C%22cookie_enabled%5C%22%3Atrue%2C%5C%22screen_width%5C%22%3A1536%2C%5C%22screen_height%5C%22%3A864%2C%5C%22browser_online%5C%22%3Atrue%2C%5C%22cpu_core_num%5C%22%3A16%2C%5C%22device_memory%5C%22%3A8%2C%5C%22downlink%5C%22%3A10%2C%5C%22effective_type%5C%22%3A%5C%224g%5C%22%2C%5C%22round_trip_time%5C%22%3A100%7D%22; bd_ticket_guard_client_data=eyJiZC10aWNrZXQtZ3VhcmQtdmVyc2lvbiI6MiwiYmQtdGlja2V0LWd1YXJkLWl0ZXJhdGlvbi12ZXJzaW9uIjoxLCJiZC10aWNrZXQtZ3VhcmQtcmVlLXB1YmxpYy1rZXkiOiJCS2YzdFFHZ3RBaU9ReGlkcDlKeTVmc3pGSit3T01KWTV2MUk0VXZoMGlHekl3TUovcWhkU0JtUW1UUWxsOWxyWmhyMG1ZZkpjZ2kwQ3Foa2ZRcDVac0E9IiwiYmQtdGlja2V0LWd1YXJkLXdlYi12ZXJzaW9uIjoyfQ%3D%3D; passport_fe_beating_status=true; stream_player_status_params=%22%7B%5C%22is_auto_play%5C%22%3A0%2C%5C%22is_full_screen%5C%22%3A0%2C%5C%22is_full_webscreen%5C%22%3A0%2C%5C%22is_mute%5C%22%3A1%2C%5C%22is_speed%5C%22%3A1%2C%5C%22is_visible%5C%22%3A1%7D%22; home_can_add_dy_2_desktop=%221%22; odin_tt=7ea8d2b5a709e547be1dc6228fbb1f6042a13e8e141089d96afc69ad3a4e50cc04bd21b49ef106f9d9b4a07724aca74c";
    /**
     * 推荐视频
     */
    public static void recommendVideo(String cookie){
        if(cookie == null || cookie.isEmpty()){
            cookie = HttpUtils.cookie;
        }
        Request request = new Request.Builder()
                .url("https://www.douyin.com/aweme/v1/web/tab/feed/?device_platform=webapp&aid=6383&channel=channel_pc_web&tag_id=&share_aweme_id=&live_insert_type=&count=10&refresh_index=2&video_type_select=1&aweme_pc_rec_raw_data=%7B%22is_client%22%3Afalse%2C%22ff_danmaku_status%22%3A1%2C%22danmaku_switch_status%22%3A1%2C%22is_dash_user%22%3A1%2C%22is_auto_play%22%3A0%2C%22is_full_screen%22%3A0%2C%22is_full_webscreen%22%3A0%2C%22is_mute%22%3A1%2C%22is_speed%22%3A1%2C%22is_visible%22%3A1%2C%22related_recommend%22%3A1%7D&globalwid=&pull_type=2&min_window=0&free_right=0&view_count=2&plug_block=0&ug_source=&creative_id=&pc_client_type=1&pc_libra_divert=Windows&version_code=170400&version_name=17.4.0&cookie_enabled=true&screen_width=1536&screen_height=864&browser_language=zh-CN&browser_platform=Win32&browser_name=Chrome&browser_version=131.0.0.0&browser_online=true&engine_name=Blink&engine_version=131.0.0.0&os_name=Windows&os_version=10&cpu_core_num=16&device_memory=8&platform=PC&downlink=10&effective_type=4g&round_trip_time=100&webid=7395471247238809125&msToken=Y2QCF10ovIp9-tioxtXn2k6Ll03msLIWhi8URGJVT9aXTCN8ej4Nm0KcV3aejH-a6nmNnTBjmvFfwkmDSJ2vvZFvgl3H8rgRbbKtVxLlhguf-uKLtesuEfC-VwseigJC_BpYWPr-6NGfv5k7vgxGr57OTaX_GgpEGfazjXh92Smmngh2gsMp&a_bogus=m64fge7JENRbcVFtmKbvCA3l82LlrsSyjNToSwPTyNKhbHMay8N0iPeGJoq9mayqaWpshe37GdFlbEVcBGUkZorkKmkfSmJyU4%2FA98soZqwXGUG%2FEN6YSg4zowsF0miN-59rEAD5XsMN2nxRVqVBlBBa95zo5cEgbrpAp2S9GDC8psLTV9QXeVfWk1E%3D&verifyFp=verify_m3cssxot_nGMCjVUb_AS8M_4Uk4_95fx_ilcrcqL9qPOL&fp=verify_m3cssxot_nGMCjVUb_AS8M_4Uk4_95fx_ilcrcqL9qPOL")
                .addHeader("user-agent",randomUA("windows"))
                .addHeader("accept","application/json, text/plain, */*")
                .addHeader("accept-language","zh-CN,zh;q=0.9,en;q=0.8,en-GB;q=0.7,en-US;q=0.6")
                .addHeader("sec-ch-ua","\"Not A(Brand\";v=\"99\", \"Microsoft Edge\";v=\"121\", \"Chromium\";v=\"121\"")
                .addHeader("priority","u=1, i")
                .addHeader("sec-ch-ua-mobile","?0")
                .addHeader("sec-ch-ua-platform","\"Windows\"")
                .addHeader("sec-fetch-dest","empty")
                .addHeader("sec-fetch-mode","cors")
                .addHeader("sec-fetch-site","same-origin")
//                .addHeader("cookie","ttwid=1%7Cy7-wgq699S5dfD3cwmlihWBJ_k0Itkr-EhSSy1ZQ5wM%7C1721892345%7C234d8ba0bcc10dea1d6ab0ab7a9bd962dba04ed5175a8984b6c9a9a7e806d891; UIFID_TEMP=3c3e9d4a635845249e00419877a3730e2149197a63ddb1d8525033ea2b3354c2e13a8efc0737ffdb2d89b7f1396ae6c753d3a0e928e7576fb849b056e7a885fcb63e9a3de8ac0b28abd5426aa3f636c7168f4f248c11fae9869f7c8b6082cae453e94e92e37e23457464bc55a8fe8c05; fpk1=U2FsdGVkX19bRxdI0zJSdj879yBkQRM79FHi8KsM4e84X+//P6tK2h00CuPmjvonC846JvHB/+fa8THZFHCPfg==; fpk2=f1f6b29a6cc1f79a0fea05b885aa33d0; SEARCH_RESULT_LIST_TYPE=%22single%22; xgplayer_user_id=573747585579; UIFID=3c3e9d4a635845249e00419877a3730e2149197a63ddb1d8525033ea2b3354c27408bce5219e2fa374624a4a7620947f974234b76297772ac00c7416492af1039e558600e8a3593470cfe202bd0fefe8ac898fd5b454621e5173c2d27d846be44ffa2b919fa8f5e5547f703b6473c9706347ff45f748057592eb17da050ecd7152db10c65a1594346daa429705768d766d348c8f0774538707d499a9c0810d126b829f2987a6bd53c65dd992224cbdbf7aebd8f07738e7560534ebcc40e4a9b5; hevc_supported=true; s_v_web_id=verify_m3cssxot_nGMCjVUb_AS8M_4Uk4_95fx_ilcrcqL9qPOL; passport_csrf_token=05dde154ea4260d0166c150067be65c3; passport_csrf_token_default=05dde154ea4260d0166c150067be65c3; bd_ticket_guard_client_web_domain=2; douyin.com; is_dash_user=1; device_web_cpu_core=16; device_web_memory_size=8; architecture=amd64; dy_swidth=1536; dy_sheight=864; csrf_session_id=7f156f9edc3de0f10fb757bcbb1e6e37; strategyABtestKey=%221733124841.361%22; FORCE_LOGIN=%7B%22videoConsumedRemainSeconds%22%3A180%7D; volume_info=%7B%22isUserMute%22%3Afalse%2C%22isMute%22%3Atrue%2C%22volume%22%3A0.5%7D; download_guide=%223%2F20241202%2F0%22; __ac_signature=_02B4Z6wo00f01yPvWWQAAIDC.LSqKim4skMjz13AAK.Bef; gulu_source_res=eyJwX2luIjoiNGEyZmE1ZTg5YTg1M2ViNDJiOTRmMzNjODI3MThlYzAyMDdmNDc5ZjdhYTgxNmE5ZjlmZmNjNmI3OGFhZWZmNiJ9; sdk_source_info=7e276470716a68645a606960273f276364697660272927676c715a6d6069756077273f276364697660272927666d776a68605a607d71606b766c6a6b5a7666776c7571273f275e58272927666a6b766a69605a696c6061273f27636469766027292762696a6764695a7364776c6467696076273f275e5827292771273f273d343436373d3c373436363234272927676c715a75776a716a666a69273f2763646976602778; bit_env=tfkR43oc1TAbZyNv1ysXe1mIZJJTAPiuBvFM3OcXRxafq-_8LeYuvKJi-Ls-S10sOCW5gbNnWa-hRCnizl5KfWNWuGUTI3pnt7nbyBdoZUeKNpXqpaIfGowhLvO7vintwvBscYd-tPkya4bkPgbZ4m5RPRnLH4d9ttJsbhHFeBuT8lJFTgGKPJUgjfDSrcl8txaFQ7l80Ef1ICSOtkoBiJF4PhEIXu4sS9zIHfcLXsbr34t2ikmEOlSJiuZyn_ZPimfFGORNXHLULx8pkBJsx2dgsQRQ42fsCb3CNtita8xJDnlI9eKq1AB_Lmnb2OHoYsYwWMiNlx7qyFIsjC2YWq9S8_4gXzTBvTRZdIQILf30bdrljnl3jWM6dZTsbW-JbwM0FoHtdmUB0dGI05RHdBA9jh7Ehsn1EzOVmmYNBphHKsjL7oloIVhy-8yC-0ToVhthOtNWPbvj7JNpQPGDKL4myam-ZwSKu_XJvmzn7LiRs5HucuD2Y8aeASy3BH6G; passport_auth_mix_state=l77prm6nsshqvnosgn6phiguctwozx2h; passport_mfa_token=CjUpVNetvpB8Zr1jZ2tbtInUu38uUWEvjROrAsVcmkMpmk9I5M8B0mNz0oEvbuGjuQF1CQtF4BpKCjwtGudUs%2BSswQPE11KonfIvva%2BR7rYcYQCWQbosDQsJqBhxE752x56MMscPL1VmmkDXmaqHZlDWDiOVutQQr4PjDRj2sdFsIAIiAQOcqBrs; d_ticket=ddee2028b8cf6666247e3c9272741fbdf9b5c; passport_assist_user=Cj2R92G3UV6xb-jmf4xxvJn9rGYhyqNoeb5ZSpOx_Q2bucZ4dHqM4hzWGUF-w-LjdYFC6pf-RxnE4DMztLwyGkoKPOe34cqvpZUziLeaq-Xv5U9l4jR_cjtOyCIoRKlgiVWeVaaM8cxcxAt5-eVtr1Oft8zr4nnFdghJhgLFZhDlguMNGImv1lQgASIBA9NkpvA%3D; n_mh=uMdSiFmP8i2dWj6705vGWkn9--naSG-Lx121BtF2X_U; sso_uid_tt=5783a2886eed7c61f2db7d24b6c405de; sso_uid_tt_ss=5783a2886eed7c61f2db7d24b6c405de; toutiao_sso_user=e3c58d87b0bad2ebe435a00058dfdd0c; toutiao_sso_user_ss=e3c58d87b0bad2ebe435a00058dfdd0c; sid_ucp_sso_v1=1.0.0-KGMzNDY2ODNkYzM3N2UyMTk5ZmU2ZjE2MTcyNmJlNTdjNGFhOGY3YWUKHwiqiJL99wIQl-21ugYY7zEgDDCNotLZBTgGQPQHSAYaAmxxIiBlM2M1OGQ4N2IwYmFkMmViZTQzNWEwMDA1OGRmZGQwYw; ssid_ucp_sso_v1=1.0.0-KGMzNDY2ODNkYzM3N2UyMTk5ZmU2ZjE2MTcyNmJlNTdjNGFhOGY3YWUKHwiqiJL99wIQl-21ugYY7zEgDDCNotLZBTgGQPQHSAYaAmxxIiBlM2M1OGQ4N2IwYmFkMmViZTQzNWEwMDA1OGRmZGQwYw; login_time=1733129879643; passport_auth_status=52cb51f862f9f9b8ebaf0776aa492051%2C; passport_auth_status_ss=52cb51f862f9f9b8ebaf0776aa492051%2C; uid_tt=a68f5506ce7d5e57aebf0fa0e442282f; uid_tt_ss=a68f5506ce7d5e57aebf0fa0e442282f; sid_tt=b1a080f6bf22a258d2e4b56893e0be43; sessionid=b1a080f6bf22a258d2e4b56893e0be43; sessionid_ss=b1a080f6bf22a258d2e4b56893e0be43; is_staff_user=false; __ac_nonce=0674d769900d5331733a5; SelfTabRedDotControl=%5B%5D; FOLLOW_LIVE_POINT_INFO=%22MS4wLjABAAAASmPmcSDRbNaw1E1RDCQkwWeYoTNcpq02bL4GM1_9u_Y%2F1733155200000%2F0%2F1733129894052%2F0%22; _bd_ticket_crypt_doamin=2; _bd_ticket_crypt_cookie=74e5bf5e06aeb90df2e2297b72556239; __security_server_data_status=1; publish_badge_show_info=%220%2C0%2C0%2C1733129895728%22; xg_device_score=7.90435294117647; sid_guard=b1a080f6bf22a258d2e4b56893e0be43%7C1733129897%7C5183985%7CFri%2C+31-Jan-2025+08%3A58%3A02+GMT; sid_ucp_v1=1.0.0-KDZmZmY2Yjc3OTE2NzYyMDBhNjkzYjgwOGIwMDg0ZTIwNjA1YTJmNzMKGQiqiJL99wIQqe21ugYY7zEgDDgGQPQHSAQaAmxxIiBiMWEwODBmNmJmMjJhMjU4ZDJlNGI1Njg5M2UwYmU0Mw; ssid_ucp_v1=1.0.0-KDZmZmY2Yjc3OTE2NzYyMDBhNjkzYjgwOGIwMDg0ZTIwNjA1YTJmNzMKGQiqiJL99wIQqe21ugYY7zEgDDgGQPQHSAQaAmxxIiBiMWEwODBmNmJmMjJhMjU4ZDJlNGI1Njg5M2UwYmU0Mw; biz_trace_id=2826297d; store-region=cn-sc; store-region-src=uid; IsDouyinActive=true; stream_recommend_feed_params=%22%7B%5C%22cookie_enabled%5C%22%3Atrue%2C%5C%22screen_width%5C%22%3A1536%2C%5C%22screen_height%5C%22%3A864%2C%5C%22browser_online%5C%22%3Atrue%2C%5C%22cpu_core_num%5C%22%3A16%2C%5C%22device_memory%5C%22%3A8%2C%5C%22downlink%5C%22%3A10%2C%5C%22effective_type%5C%22%3A%5C%224g%5C%22%2C%5C%22round_trip_time%5C%22%3A100%7D%22; bd_ticket_guard_client_data=eyJiZC10aWNrZXQtZ3VhcmQtdmVyc2lvbiI6MiwiYmQtdGlja2V0LWd1YXJkLWl0ZXJhdGlvbi12ZXJzaW9uIjoxLCJiZC10aWNrZXQtZ3VhcmQtcmVlLXB1YmxpYy1rZXkiOiJCS2YzdFFHZ3RBaU9ReGlkcDlKeTVmc3pGSit3T01KWTV2MUk0VXZoMGlHekl3TUovcWhkU0JtUW1UUWxsOWxyWmhyMG1ZZkpjZ2kwQ3Foa2ZRcDVac0E9IiwiYmQtdGlja2V0LWd1YXJkLXdlYi12ZXJzaW9uIjoyfQ%3D%3D; passport_fe_beating_status=true; stream_player_status_params=%22%7B%5C%22is_auto_play%5C%22%3A0%2C%5C%22is_full_screen%5C%22%3A0%2C%5C%22is_full_webscreen%5C%22%3A0%2C%5C%22is_mute%5C%22%3A1%2C%5C%22is_speed%5C%22%3A1%2C%5C%22is_visible%5C%22%3A1%7D%22; home_can_add_dy_2_desktop=%221%22; odin_tt=7ea8d2b5a709e547be1dc6228fbb1f6042a13e8e141089d96afc69ad3a4e50cc04bd21b49ef106f9d9b4a07724aca74c")
                .addHeader("cookie",cookie)
                .addHeader("referer","https://www.douyin.com/")
                .build();
        try {
            Response response = client.newCall(request).execute();//发送请求
            String result = Objects.requireNonNull(response.body()).string();
            JSONObject jsonObject = new JSONObject(result);
            JSONArray awemeList = jsonObject.getJSONArray("aweme_list");
            for (int i = 0; i < awemeList.length(); i++) {
                JSONObject item = awemeList.getJSONObject(i);
                if(!item.isNull("video")){
                    JSONObject video = item.getJSONObject("video");
                    JSONObject playAddr = video.getJSONObject("play_addr");
                    JSONArray urlList = playAddr.getJSONArray("url_list");
                    String videoSrc = urlList.getString(2); //播放地址



                }
            }
        }  catch (Exception e) {
            e.printStackTrace();
        }
    }

    public static String randomUA(String type){
        Random random = new Random();
        int r1 = random.nextInt(9) + 1;
        int r2 = random.nextInt(9) + 1;
        int r3 = random.nextInt(9) + 1;
        int r4 = random.nextInt(9) + 1;
        if(type.equals("android")){
            return "Mozilla/5.0 (Linux; Android 6.0; Nexus 5 Build/MRA58N) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/"+r1+"5."+r4+".4"+r2+"32.2"+r3+"2 Mobile Safari/5"+r4+"5.06";
        }else if(type.equals("win2")){
            return "Mozilla/5.0 (Windows; U; Windows NT 5.2;. en-US) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/"+r1+"5."+r4+".2"+r2+"32.2"+r3+"2 Mobile Safari/5"+r4+"3.06";
        }else {
            return "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/"+r1+"5."+r4+".2"+r2+"32.2"+r3+"2 Mobile Safari/5"+r4+"3.06";
        }
    }
}
